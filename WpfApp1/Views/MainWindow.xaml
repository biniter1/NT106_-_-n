<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp1"
        xmlns:models="clr-namespace:WpfApp1.Models"
        xmlns:converters="clr-namespace:WpfApp1.Converters"
        xmlns:viewModels="clr-namespace:WpfApp1.ViewModels"
        xmlns:views="clr-namespace:WpfApp1.Views"
        mc:Ignorable="d"
        Title="{DynamicResource AppTitle}" Height="600" Width="1000"
        Background="#F5F5F5">
    <Window.Resources>
        <ResourceDictionary>

            <Style x:Key="SearchBoxPlaceholderStyle" TargetType="TextBox">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Grid>
                                <TextBlock Text="{DynamicResource SearchPlaceholderChat}"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           Visibility="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}" />
                                <ScrollViewer x:Name="PART_ContentHost" Margin="0" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate DataType="{x:Type viewModels:ChatViewModel}">
                <views:ChatView/>
            </DataTemplate>

            <DataTemplate DataType="{x:Type viewModels:FriendListViewModel}">
                <views:FriendListView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type viewModels:SettingsViewModel}">
                <views:SettingsView/>
            </DataTemplate>
        </ResourceDictionary>
    </Window.Resources>

    <Grid x:Name="chatGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="60"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="{StaticResource Sidebar}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0">
            <StackPanel VerticalAlignment="Stretch" Margin="0, 10, 0, 0">
                <Button FontFamily="Segoe MDL2 Assets" Content="" ToolTip="{DynamicResource ProfileTooltip}"
                        Command="{Binding ShowProfilePopupCommand}" Width="40" Height="40" FontSize="18" Background="Transparent" Foreground="Gray" BorderThickness="0" Margin="5"/>

                <Button FontFamily="Segoe Fluent Icons" Content="" ToolTip="{DynamicResource MessageTooltip}"
                        Command="{Binding ShowChatCommand}" Width="40" Height="40" FontSize="18" Background="Transparent" Foreground="Gray" BorderThickness="0" Margin="5"/>

                <Button FontFamily="Segoe Fluent Icons" Content="" ToolTip="{DynamicResource FriendsTooltip}"
                        Command="{Binding ShowFriendListCommand}" Width="40" Height="40" FontSize="18" Background="Transparent" Foreground="Gray" BorderThickness="0" Margin="5"/>

                <Button FontFamily="Segoe MDL2 Assets" Content="" ToolTip="{DynamicResource SettingsTooltip}"
                        Command="{Binding ShowSettingsPopupCommand}" Width="40" Height="40" FontSize="18" Background="Transparent" Foreground="Gray" BorderThickness="0" Margin="5"/>
            </StackPanel>
        </Border>

        <Popup x:Name="MessageNotificationPopup" StaysOpen="False" Placement="Bottom" PlacementTarget="{Binding ElementName=chatGrid}">
            <Border Background="{StaticResource WhiteBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="{StaticResource DefaultCornerRadius}" Padding="10" MaxWidth="300">
                <StackPanel>
                    <TextBlock x:Name="NotificationText" FontWeight="Bold" Foreground="{StaticResource TextPrimaryBrush}" TextWrapping="Wrap" MouseLeftButtonDown="NotificationText_MouseLeftButtonDown"/>
                    <Button Content="Đóng" Click="CloseNotification_Click" HorizontalAlignment="Right" Margin="5" Background="{StaticResource PrimaryBrush}" Foreground="{StaticResource WhiteBrush}" BorderThickness="0" Padding="5"/>
                </StackPanel>
            </Border>
        </Popup>

        <ContentControl Grid.Column="1" Content="{Binding CurrentViewModel}" Margin="0"/>
    </Grid>
</Window>